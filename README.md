# 纳指 ETF 跨市场溢价套利分析工具 (Arbitrage Dashboard)

本工具专为 **QDII 基金（纳指 ETF）** 交易者设计，通过对不同市场标的（如 513300 与 159941）的折溢价率进行实时监控与历史统计对比，发现统计学意义上的价格回归机会，辅助套利决策。

## 1. 核心需求背景

由于 QDII 基金受限于外汇额度、交易时差及申赎限制，二级市场价格常与实际净值（NAV）出现显著背离（溢价）。

* **套利机会**：当标的 A 的溢价率显著高于标的 B 时，可通过卖出 A 买入 B 的方式，在不改变底层资产（均为纳指 100）的前提下，获取折溢价回归带来的超额收益。
* **统计决策**：通过历史分位排名（Percentile）和频数分布，量化当前“价差”是否处于极端区域。

## 2. 功能模块

本项目集成了数据抓取、统计建模与交互可视化三大核心模块：

### A. 数据工程 (Data Pipeline)

* **价格抓取**：基于 `akshare` 接口获取 ETF 每日复权收盘价。
* **净值对齐**：自动匹配东方财富（EM）官方发布的单位净值，确保折溢价率计算的准确性。
* **跨年处理**：针对 QDII 净值披露延迟（T+2）及跨年行情（2026 年初）进行了日期容错逻辑优化。

### B. 统计模型 (Statistical Analysis)

* **溢价差计算 (Spread)**：。
* **历史分位点 (Percentile)**：计算当前 Spread 在历史长河中的排名位置，定位“机会/风险”区间。
* **回归预期 (Alpha Prediction)**：量化当前 Spread 回归至历史均值（Mean）所需的获利空间。

### C. 可视化交互 (Visualization)

* **趋势看板**：展示双标的溢价波动及价差走势，辅助观察相关性收敛/发散。
* **概率直方图**：使用**莫兰迪低饱和度配色**，直观展示价差分布频率。
* **视觉锚点**：自动在分布图中标注**珊瑚粉色**高亮柱子，实时反映当前水位。

## 3. 指标解读指南

| 指标名称 | 含义 | 交易参考 |
| --- | --- | --- |
| **最新价差 (Spread)** | 两标的溢价率之差 | 负值代表标的 1 相对标的 2 较便宜。 |
| **历史分位排名** | 当前价差低于历史上多少个交易日 | 低于 5% 代表进入“黄金坑”，回归概率大。 |
| **预期回归收益** | 价差回到历史均值时的潜在获利 | 评估该笔套利操作的风险收益比。 |
| **5%/95% 水位线** | 统计学上的极端边界 | 触碰该线通常代表非理性杀跌或冲高。 |

## 4. 技术栈

* **数据源**：AkShare (EM Data)
* **处理引擎**：Pandas / NumPy
* **可视化**：PyEcharts (ECharts 5.0 Core)

## 5. 快速启动

1. 安装依赖：`pip install akshare pandas numpy pyecharts`
2. 运行脚本：`python arbitrage_analysis.py`
3. 查看输出：浏览器打开 `arbitrage_report_final.html`

---

## 6. 免责声明

本工具仅作为统计分析辅助工具，所计算的预期收益基于历史均值回归假设，不构成投资建议。QDII 交易涉及汇率波动、流动性缺失及基金公司限额风险，请审慎操作。

---
